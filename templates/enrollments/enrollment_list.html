{% extends 'base.html' %}
{% load static %}

{% block title %}Ro'yxatga olish{% endblock %}

{% block content %}
<div class="page-header">
    <div class="header-content">
        <div class="header-text">
            <h1 class="page-title">Ro'yxatga olish</h1>
            <p class="page-subtitle">Studentlarning kurslarga yozilgan ma'lumotlari</p>
        </div>
        <a href="{% url 'enrollment_create' %}" class="btn btn-primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Yangi ro'yxat
        </a>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                <line x1="9" y1="12" x2="15" y2="12"/>
                <line x1="9" y1="16" x2="15" y2="16"/>
            </svg>
        </div>
        <div class="stat-content">
            <h3 class="stat-value">{{ enrollments|length }}</h3>
            <p class="stat-label">Jami Yozilganlar</p>
        </div>
    </div>
</div>

{% if enrollments %}
<div class="table-wrapper">
    <table class="data-table">
        <thead>
            <tr>
                <th>Student</th>
                <th>Kurs</th>
                <th>Kurs davomiyligi</th>
                <th>Ro'yxatga olingan sana</th>
                <th class="text-center">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for enrollment in enrollments %}
            <tr class="table-row">
                <td>
                    <div class="user-cell">
                        <div class="user-avatar">{{ enrollment.student.full_name|slice:":1"|upper }}</div>
                        <div>
                            <a href="{% url 'student_detail' enrollment.student.pk %}" class="user-name">
                                {{ enrollment.student.full_name }}
                            </a>
                            <div class="user-meta">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                                {{ enrollment.student.email }}
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="course-cell">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                        <a href="{% url 'course_detail' enrollment.course.pk %}" class="course-link">
                            {{ enrollment.course.title }}
                        </a>
                    </div>
                </td>
                <td>
                    <span class="badge badge-primary">{{ enrollment.course.duration_weeks }} hafta</span>
                </td>
                <td class="text-muted">
                    <div class="date-cell">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                        {{ enrollment.enrolled_at|date:"d-m-Y, H:i" }}
                    </div>
                </td>
                <td class="text-center">
                    <span class="badge badge-success">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Aktiv
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <div class="empty-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            <line x1="9" y1="12" x2="15" y2="12"/>
            <line x1="9" y1="16" x2="15" y2="16"/>
        </svg>
    </div>
    <h3 class="empty-title">Hozircha ro'yxatlar yo'q</h3>
    <p class="empty-text">Studentlarni kurslarga yozish uchun yuqoridagi tugmani bosing</p>
    <a href="{% url 'enrollment_create' %}" class="btn btn-primary">Ro'yxat yaratish</a>
</div>
{% endif %}
{% endblock %}